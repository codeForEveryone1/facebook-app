(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4532:function(e,t,a){Promise.resolve().then(a.bind(a,5922)),Promise.resolve().then(a.t.bind(a,768,23)),Promise.resolve().then(a.t.bind(a,681,23)),Promise.resolve().then(a.bind(a,9064)),Promise.resolve().then(a.bind(a,7317)),Promise.resolve().then(a.t.bind(a,3593,23))},7317:function(e,t,a){"use strict";a.d(t,{default:function(){return E}});var s=a(7437),r=a(4847);function n(){let e={hidden:{opacity:.3,scale:.5},visible:e=>({opacity:1,scale:1,transition:{delay:.2*e,repeat:1/0,repeatType:"reverse",duration:.6}})};return(0,s.jsxs)("div",{className:"fixed inset-0 flex flex-col gap-4 items-center justify-center bg-blue-600 dark:bg-blue-200 z-50",children:[(0,s.jsx)("div",{className:"relative  w-40 h-40",children:(0,s.jsx)(r.E.svg,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-full h-full text-white",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,s.jsx)("path",{fill:"currentColor",d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,s.jsx)("div",{className:"flex space-x-3",children:[0,1,2].map(t=>(0,s.jsx)(r.E.div,{className:"w-6 h-6 bg-white rounded-full",initial:"hidden",animate:"visible",custom:t,variants:e},t))}),(0,s.jsx)(r.E.div,{className:"text-white text-3xl mt-4 font-bold  tracking-widest",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:"Facebook"})]})}var i=a(7173),l=a(8882),o=a(9376),c=a(2265),d=a(4522),u=a(4449),f=a(5936),m=a(322),h=a(7061),p=a(9229),x=a(3247),v=a(4938),g=a(9374),y=a(5805),w=a(3566),j=a(4766),b=a(2718),N=a(7226),k=a(5929),Z=a(7692),z=a(5922),C=a(3145),S=a(9064),_=()=>{var e;let[t,a]=(0,c.useState)(!1),[r,_]=(0,c.useState)(""),[E,F]=(0,c.useState)([]),[R,P]=(0,c.useState)([]),[A,q]=(0,c.useState)(!1),[L,U]=(0,c.useState)("home"),D=(0,c.useRef)(null),{theme:I,setTheme:Q}=(0,z.F)(),{toggleSidebar:V}=(0,p.Z)(),X=(0,o.useRouter)(),{user:$,clearUser:O}=(0,l.Z)(),W=null==$?void 0:null===(e=$.username)||void 0===e?void 0:e.split(" ").map(e=>e[0]).join(""),T=(e,t)=>{X.push(e),U(t)},Y=async()=>{try{let e=await (0,i.kS)();(null==e?void 0:e.status)=="success"&&(X.push("/user-login"),O()),S.ZP.success("user logged out successfully")}catch(e){console.log(e),S.ZP.error("failed to log out")}};(0,c.useEffect)(()=>{(async()=>{try{q(!0);let e=await (0,h.AW)();F(e)}catch(e){console.log(e)}finally{q(!1)}})()},[]),(0,c.useEffect)(()=>{r?(P(E.filter(e=>e.username.toLowerCase().includes(r.toLowerCase()))),a(!0)):(P([]),a(!1))},[r,E]);let M=async e=>{try{q(!0),a(!1),_(""),await X.push("user-profile/".concat(e))}catch(e){console.log(e)}finally{q(!1)}},B=e=>{var t;(null===(t=D.current)||void 0===t?void 0:t.contains(e.target))||a(!1)};return((0,c.useEffect)(()=>(document.addEventListener("click",B),()=>{document.removeEventListener("click",B)})),A)?(0,s.jsx)(n,{}):(0,s.jsx)("header",{className:"bg-white dark:bg-[rgb(36,37,38)]  fixed top-0 left-0 right-0 text-foreground z-50",children:(0,s.jsxs)("div",{className:"flex justify-between items-center p-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,s.jsx)(C.default,{onClick:()=>T("/"),className:"cursor-pointer",src:"/fecbook.png",alt:"Description of the image",width:45,height:45}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a(!1)},children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x.Z,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 "}),(0,s.jsx)(m.I,{className:"pl-8 w-44 md:w-64 h-8 bg-gray-100 dark:bg-[rgb(58,59,60)] rounded-full",placeholder:"search facebook..",value:r,onChange:e=>_(e.target.value),onFocus:()=>a(!0)})]}),t&&(0,s.jsx)("div",{className:"absolute top-full max-sm:min-w-[440px] max-sm:-left-12 left-0 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg mt-1 z-50 ",children:(0,s.jsx)("div",{className:"p-2",children:R.length>0?R.map(e=>(0,s.jsxs)("div",{className:"  flex items-center sm:space-x-8 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md cursor-pointer",onClick:()=>M(null==e?void 0:e._id),children:[(0,s.jsx)(x.Z,{className:"absolute text-sm  text-gray-400 "}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.qE,{className:"h-8 w-8",children:(null==e?void 0:e.profilePicture)?(0,s.jsx)(d.F$,{src:null==e?void 0:e.profilePicture,alt:null==e?void 0:e.username}):(0,s.jsx)(d.Q5,{children:W})}),(0,s.jsx)("span",{children:null==e?void 0:e.username})]})]},e._id)):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"sm:p-2 text-gray-500",children:"No user Found"})})})})]})})]}),(0,s.jsx)("nav",{className:"hidden md:flex justify-around w-[40%] max-w-md",children:[{icon:v.Z,path:"/",name:"home"},{icon:g.Z,path:"/videos",name:"video"},{icon:y.Z,path:"/friends-list",name:"friends"}].map(e=>{let{icon:t,path:a,name:r}=e;return(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"relative text-gray-600 dark:text-gray-400 hover:text-blue-600 hover:bg-transparent  ".concat(L===r?"text-blue-600":" "),onClick:()=>T(a,r),children:(0,s.jsx)(t,{})},r)})}),(0,s.jsxs)("div",{className:"flex space-x-2 md:space-x-4 items-center",children:[(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"md:hidden text-gray-600 cursor-pointer",onClick:V,children:(0,s.jsx)(w.Z,{})}),(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"hidden md:block text-gray-600 cursor-pointer pl-1",children:(0,s.jsx)(j.Z,{})}),(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"hidden md:block text-gray-600 cursor-pointer pl-1",children:(0,s.jsx)(b.Z,{})}),(0,s.jsxs)(f.h_,{children:[(0,s.jsx)(f.$F,{asChild:!0,children:(0,s.jsx)("div",{className:"relative h-8 w-8 rounded-full cursor-pointer",children:(0,s.jsx)(d.qE,{className:"h-8 w-8 mr-2",children:(null==$?void 0:$.profilePicture)?(0,s.jsx)(d.F$,{src:null==$?void 0:$.profilePicture,alt:null==$?void 0:$.username}):(0,s.jsx)(d.Q5,{className:"dark:bg-gray-400",children:W})})})}),(0,s.jsxs)(f.AW,{className:"w-64 z-50",align:"end",children:[(0,s.jsx)(f.Ju,{className:"font-normal",children:(0,s.jsx)("div",{className:"flex flex-col space-y-1",children:(0,s.jsxs)("div",{className:"flex items-center ",children:[(0,s.jsx)(d.qE,{className:"h-8 w-8 mr-2",children:(null==$?void 0:$.profilePicture)?(0,s.jsx)(d.F$,{src:null==$?void 0:$.profilePicture,alt:null==$?void 0:$.username}):(0,s.jsx)(d.Q5,{className:"dark:bg-gray-400",children:W})}),(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:null==$?void 0:$.username}),(0,s.jsx)("p",{className:"text-xs mt-2 text-gray-600 leading-none",children:null==$?void 0:$.email})]})]})})}),(0,s.jsx)(f.VD,{}),(0,s.jsxs)(f.Xi,{className:"cursor-pointer",onClick:()=>T("/user-profile/".concat(null==$?void 0:$._id)),children:[(0,s.jsx)(y.Z,{})," ",(0,s.jsx)("span",{className:"ml-2",children:"Profile"})]}),(0,s.jsxs)(f.Xi,{className:"cursor-pointer",children:[(0,s.jsx)(b.Z,{})," ",(0,s.jsx)("span",{className:"ml-2",children:"Messages"})]}),(0,s.jsx)(f.VD,{}),(0,s.jsx)(f.Xi,{onClick:()=>Q("dark"===I?"light":"dark"),className:"cursor-pointer",children:"light"===I?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(N.Z,{className:"mr-2"}),(0,s.jsx)("span",{children:"Dark Mode"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{className:"mr-2"}),(0,s.jsx)("span",{children:"Light Mode"})]})}),(0,s.jsxs)(f.Xi,{className:"cursor-pointer",onClick:Y,children:[(0,s.jsx)(Z.Z,{})," ",(0,s.jsx)("span",{className:"ml-2",children:"Logout"})]})]})]})]})]})})};function E(e){let{children:t}=e,{setUser:a,clearUser:r}=(0,l.Z)(),d=(0,o.useRouter)(),u=(0,o.usePathname)(),[f,m]=(0,c.useState)(!0),[h,p]=(0,c.useState)(!1),x="/user-login"===u,v=async()=>{r(),p(!1);try{await (0,i.kS)()}catch(e){console.log("Logout failed, please try again later",e)}x||d.push("/user-login")};return((0,c.useEffect)(()=>{let e=async()=>{try{let e=await (0,i.Sk)();e.isAuthenticated?(a(null==e?void 0:e.user),p(!0)):await v()}catch(e){console.error("Authentication failed",e),await v()}finally{m(!1)}};x?m(!1):e()},[x,d,a,r]),!f&&(h||x))?(0,s.jsxs)(s.Fragment,{children:[!x&&h&&(0,s.jsx)(_,{}),(h||x)&&t]}):(0,s.jsx)(n,{})}},4522:function(e,t,a){"use strict";a.d(t,{F$:function(){return o},Q5:function(){return c},qE:function(){return l}});var s=a(7437),r=a(2265),n=a(4930),i=a(6474);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});l.displayName=n.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...r})});o.displayName=n.Ee.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});c.displayName=n.NY.displayName},4449:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var s=a(7437),r=a(2265),n=a(7053),i=a(7712),l=a(6474);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...d})});c.displayName="Button"},5936:function(e,t,a){"use strict";a.d(t,{$F:function(){return c},AW:function(){return d},Ju:function(){return f},VD:function(){return m},Xi:function(){return u},h_:function(){return o}});var s=a(7437),r=a(2265),n=a(85),i=a(653),l=a(6474);let o=n.fC,c=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,r.forwardRef((e,t)=>{let{className:a,inset:r,children:o,...c}=e;return(0,s.jsxs)(n.fF,{ref:t,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",a),...c,children:[o,(0,s.jsx)(i.XCv,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.tu,{ref:t,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=n.tu.displayName;let d=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,s.jsx)(n.Uv,{children:(0,s.jsx)(n.VY,{ref:t,sideOffset:r,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});d.displayName=n.VY.displayName;let u=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(n.ck,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...i})});u.displayName=n.ck.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:o,...c}=e;return(0,s.jsxs)(n.oC,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...c,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(i.nQG,{className:"h-4 w-4"})})}),r]})}).displayName=n.oC.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(n.Rk,{ref:t,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(i.jXb,{className:"h-4 w-4 fill-current"})})}),r]})}).displayName=n.Rk.displayName;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(n.__,{ref:t,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...i})});f.displayName=n.__.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",a),...r})});m.displayName=n.Z0.displayName},322:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var s=a(7437),r=a(2265),n=a(6474);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},6474:function(e,t,a){"use strict";a.d(t,{F:function(){return o},cn:function(){return l},u:function(){return c}});var s=a(1994),r=a(3335),n=a(8528),i=a(2258);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}let o=e=>(0,n.Q)((0,i.D)(e),{addSuffix:!0}),c=e=>new Date(e).toLocaleDateString("en-GB")},7173:function(e,t,a){"use strict";a.d(t,{Sk:function(){return l},a$:function(){return r},kS:function(){return i},pH:function(){return n}});var s=a(7415);let r=async e=>{try{return(await s.Z.post("/api/auth/register",e)).data}catch(e){console.log(e)}},n=async e=>{try{let t=await s.Z.post("/api/auth/login",e);return{status:"success",data:t.data}}catch(e){var t;return{status:"error",data:(null===(t=e.response)||void 0===t?void 0:t.data)||{}}}},i=async()=>{try{return(await s.Z.get("/api/auth/logout")).data}catch(e){console.log(e)}},l=async()=>{try{var e;let t=await s.Z.get("/api/users/check-auth");if("success"!==t.data.status)return{isAuthenticated:!1};return{isAuthenticated:!0,user:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.data}}catch(e){return console.log(e),{isAuthenticated:!1}}}},7415:function(e,t,a){"use strict";let s=a(3464).Z.create({baseURL:"http://localhost:5000",withCredentials:!0});t.Z=s},7061:function(e,t,a){"use strict";a.d(t,{AW:function(){return h},C0:function(){return d},Lj:function(){return u},P_:function(){return i},Qv:function(){return n},W5:function(){return l},YI:function(){return c},ZT:function(){return r},ik:function(){return o},ir:function(){return m},qo:function(){return f}});var s=a(7415);let r=async()=>{try{let e=await s.Z.get("/api/users/friend-request");return null==e?void 0:e.data}catch(e){throw console.log(e),e}},n=async()=>{try{let e=await s.Z.get("/api/users/user-to-request");return null==e?void 0:e.data}catch(e){throw console.log(e),e}},i=async e=>{try{let t=await s.Z.post("/api/users/follow",{userIdToFollow:e});return null==t?void 0:t.data}catch(e){throw console.log(e),e}},l=async e=>{try{let t=await s.Z.post("/api/users/unfollow",{userIdToUnFollow:e});return null==t?void 0:t.data}catch(e){throw console.log(e),e}},o=async e=>{try{let t=await s.Z.post("/api/users/friend-request/remove",{requestSenderId:e});return null==t?void 0:t.data}catch(e){throw console.log(e),e}},c=async e=>{try{var t;let a=await s.Z.get("/api/users/profile/".concat(e));return null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.data}catch(e){throw console.log(e),e}},d=async e=>{try{var t;let a=await s.Z.get("/api/users/mutual-friends/".concat(e));return null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.data}catch(e){throw console.log(e),e}},u=async(e,t)=>{try{var a;let r=await s.Z.put("/api/users/profile/".concat(e),t);return null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.data}catch(e){throw console.log(e),e}},f=async(e,t)=>{try{var a;let r=await s.Z.put("/api/users/profile/cover-photo/".concat(e),t);return null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.data}catch(e){throw console.log(e),e}},m=async(e,t)=>{try{var a;let r=await s.Z.put("/api/users/bio/".concat(e),t);return null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.data}catch(e){throw console.log(e),e}},h=async()=>{try{var e;let t=await s.Z.get("/api/users");return null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.data}catch(e){throw console.log(e),e}}},9229:function(e,t,a){"use strict";let s=(0,a(3011).U)(e=>({isSidebarOpen:!1,toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen}))}));t.Z=s},8882:function(e,t,a){"use strict";var s=a(3011),r=a(6885);let n=(0,s.U)((0,r.tJ)(e=>({user:null,setUser:t=>e({user:t}),clearUser:()=>e({user:null})}),{name:"user-storage",getStorage:()=>localStorage}));t.Z=n},3593:function(){}},function(e){e.O(0,[981,310,454,835,386,26,85,868,971,117,744],function(){return e(e.s=4532)}),_N_E=e.O()}]);