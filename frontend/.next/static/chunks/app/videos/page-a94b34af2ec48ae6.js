(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55],{1382:function(e,t,s){Promise.resolve().then(s.bind(s,410))},642:function(e,t,s){"use strict";var a=s(7437),r=s(2265),l=s(4522),n=s(4449),i=s(4938),o=s(5805),d=s(9374),c=s(2718),u=s(2369),m=s(4766),f=s(3871),h=s(9229),x=s(9376),v=s(8882);t.Z=()=>{let{isSidebarOpen:e,toggleSidebar:t}=(0,h.Z)(),s=(0,x.useRouter)(),p=(0,r.useRef)(null),{user:g}=(0,v.Z)(),y=(a,r)=>{s.push(a),e&&t()},j=s=>{e&&p.current&&!p.current.contains(s.target)&&t()};(0,r.useEffect)(()=>(e?document.addEventListener("click",j):document.removeEventListener("click",j),()=>{document.removeEventListener("click",j)}),[e]);let w=(null==g?void 0:g.username)?g.username.split(" ").map(e=>e.charAt(0).toUpperCase()).join(""):"U";return(0,a.jsx)("aside",{ref:p,className:"fixed top-10  left-0 h-full w-64 p-4 transform transition-transform duration-200 ease-in-out md:translate-x-0 flex flex-col z-50 md:z-0 ".concat(e?"translate-x-0 bg-white dark:bg-[rgb(37,38,39)] shadow-lg":"-translate-x-full","  ").concat(e?"md:hidden ":"md:block"," md:bg-transparent md:shadow-none "),children:(0,a.jsxs)("div",{className:"flex flex-col h-full overflow-y-auto",children:[(0,a.jsxs)("nav",{className:"space-y-3 flex-grow",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>y("/"),children:[(0,a.jsx)(l.qE,{className:"h-8 w-8",children:(null==g?void 0:g.profilePicture)?(0,a.jsx)(l.F$,{src:null==g?void 0:g.profilePicture,alt:null==g?void 0:g.username}):(0,a.jsx)(l.Q5,{className:"dark:bg-gray-400",children:w})}),(0,a.jsx)("span",{className:"font-semibold",children:null==g?void 0:g.username})]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"full justify-start   ",onClick:()=>y("/"),children:[(0,a.jsx)(i.Z,{className:"mr-4"}),"Home"]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"full justify-start",onClick:()=>y("/friends-list"),children:[(0,a.jsx)(o.Z,{className:"mr-4"}),"Friends"]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"full justify-start",onClick:()=>y("/videos"),children:[(0,a.jsx)(d.Z,{className:"mr-4"}),"Video"]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"full justify-start",children:[(0,a.jsx)(c.Z,{className:"mr-4"}),"Messages"]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"full justify-start",onClick:()=>y("/user-profile/".concat(null==g?void 0:g._id)),children:[(0,a.jsx)(u.Z,{className:"mr-4"}),"Profile"]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"full justify-start",children:[(0,a.jsx)(m.Z,{className:"mr-4"}),"Notification"]})]}),(0,a.jsxs)("div",{className:"mb-16",children:[(0,a.jsx)(f.Z,{className:"my-4"}),(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-4 cursor-pointer",children:(0,a.jsx)(l.qE,{className:"h-8 w-8",onClick:()=>y("/user-profile/".concat(null==g?void 0:g._id)),children:(null==g?void 0:g.profilePicture)?(0,a.jsx)(l.F$,{src:null==g?void 0:g.profilePicture,alt:null==g?void 0:g.username}):(0,a.jsx)(l.Q5,{className:"dark:bg-gray-400",children:w})})}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,a.jsx)("p",{children:"Privacy \xb7 Terms \xb7 Advertising "}),(0,a.jsx)("p",{children:"Cookies \xb7 Meta \xa9 2024"})]})]})]})})}},410:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(7437),r=s(2265),l=s(642),n=s(4449),i=s(2451),o=s(4847),d=s(8614),c=s(4522),u=s(1723),m=s(1810),f=s(2718),h=s(8919),x=s(4743),v=s(1298),p=s(6474),g=e=>{let{comments:t}=e;return(0,a.jsx)(a.Fragment,{children:null==t?void 0:t.map(e=>{var t,s,r,l,i,o;return(0,a.jsxs)("div",{className:"flex items-start space-x-2 mb-4",children:[(0,a.jsx)(c.qE,{className:"h-8 w-8 ",children:(null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.profilePicture)?(0,a.jsx)(c.F$,{src:null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.profilePicture,alt:null==e?void 0:null===(r=e.user)||void 0===r?void 0:r.username}):(0,a.jsx)(c.Q5,{className:"dark:bg-gray-400",children:null==e?void 0:null===(i=e.user)||void 0===i?void 0:null===(l=i.username)||void 0===l?void 0:l.split(" ").map(e=>e[0]).join(" ")})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-2",children:[(0,a.jsx)("p",{className:"font-semibold text-sm",children:null==e?void 0:null===(o=e.user)||void 0===o?void 0:o.username}),(0,a.jsx)("p",{className:"text-sm",children:null==e?void 0:e.text})]}),(0,a.jsxs)("div",{className:"flex items-center mt-1 text-xs text-gray-400",children:[(0,a.jsx)(n.z,{variant:"ghost",size:"sm",children:"Like"}),(0,a.jsx)(n.z,{variant:"ghost",size:"sm",children:"Reply"}),(0,a.jsx)("span",{children:(0,p.F)(e.createdAt)})]})]})]},null==e?void 0:e._id)})})},y=s(3643);let j=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(y.fC,{ref:t,className:(0,p.cn)("relative overflow-hidden",s),...l,children:[(0,a.jsx)(y.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(w,{}),(0,a.jsx)(y.Ns,{})]})});j.displayName=y.fC.displayName;let w=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,a.jsx)(y.gb,{ref:t,orientation:r,className:(0,p.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,a.jsx)(y.q4,{className:"relative flex-1 rounded-full bg-border"})})});w.displayName=y.gb.displayName;var N=s(322),b=s(8882),k=e=>{var t,s,l,i,p,y;let{post:w,isLiked:k,onShare:Z,onComment:C,onLike:P}=e,[z,S]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1),{user:R}=(0,b.Z)(),[F,L]=(0,r.useState)(""),U=(0,r.useRef)(null),D=null==R?void 0:null===(t=R.username)||void 0===t?void 0:t.split(" ").map(e=>e[0]).join(""),q=async()=>{F.trim()&&(C({text:F}),L(""))},A=()=>"http://localhost:3000/".concat(null==w?void 0:w.id),O=e=>{let t;let s=A();switch(e){case"facebook":t="https://www.facebook.com/sharer/sharer.php?u=}";break;case"twitter":t="https://twitter.com/intent/tweet?url=}";break;case"linkedin":t="https://www.linkedin.com/shareArticle?mini=true&url=}";break;case"copy":navigator.clipboard.writeText(s),S(!1);return;default:return}window.open(t,"_blank"),S(!1)};return(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-[rgb(36,37,38)] rounded-lg shadow-lg overflow-hidden mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4 px-4 mt-2 ",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.qE,{className:"h-10 w-10 rounded-full mr-3",children:(null==w?void 0:null===(s=w.user)||void 0===s?void 0:s.profilePicture)?(0,a.jsx)(c.F$,{src:null==w?void 0:null===(l=w.user)||void 0===l?void 0:l.profilePicture,alt:null==w?void 0:null===(i=w.user)||void 0===i?void 0:i.username}):(0,a.jsx)(c.Q5,{className:"dark:bg-gray-400",children:D})}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"font-semibold dark:text-white",children:null==w?void 0:null===(p=w.user)||void 0===p?void 0:p.username})})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[(0,a.jsx)(u.Z,{className:"h-2 w-2 mr-1"}),(0,a.jsx)("span",{className:"text-sm",children:(null==w?void 0:w.createdAt)?(e=>{let t=Math.floor((new Date-new Date(e))/1e3);return t<60?"Just now":t<3600?"".concat(Math.floor(t/60)," m ago"):t<86400?"".concat(Math.floor(t/3600)," h ago"):"".concat(Math.floor(t/86400)," d ago")})(w.createdAt):"Unknown date"})]})]}),(0,a.jsx)("div",{className:"ralative aspect-video bg-black mb-4",children:(null==w?void 0:w.mediaUrl)&&(0,a.jsxs)("video",{controls:!0,className:"w-full h-[500px] rounded-lg mb-4",children:[(0,a.jsx)("source",{src:null==w?void 0:w.mediaUrl,type:"video/mp4"}),"Your browser does not support the video tag"]})}),(0,a.jsxs)("div",{className:"md:flex justify-between px-2 mb-2 items-center",children:[(0,a.jsxs)("div",{className:"flex sm:space-x-4",children:[(0,a.jsxs)(n.z,{variant:"ghost",className:"flex dark:hover:bg-gray-600 items-center  ".concat(k?"text-blue-600":""),onClick:P,children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Like"})]}),(0,a.jsxs)(n.z,{variant:"ghost",className:"flex items-center dark:hover:bg-gray-600 ",onClick:()=>{E(!0),setTimeout(()=>{var e;null==U||null===(e=U.current)||void 0===e||e.focus()},0)},children:[(0,a.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Comment"})]}),(0,a.jsxs)(v.Vq,{open:z,onOpenChange:S,children:[(0,a.jsx)(v.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:"ghost",className:"flex items-center dark:hover:bg-gray-500",onClick:Z,children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"share"})]})}),(0,a.jsxs)(v.cZ,{children:[(0,a.jsxs)(v.fK,{children:[(0,a.jsx)(v.$N,{children:"Share This Post"}),(0,a.jsx)(v.Be,{children:"Choose how you want to share this post"})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4 ",children:[(0,a.jsx)(n.z,{onClick:()=>O("facebook"),children:"Share on Facebook"}),(0,a.jsx)(n.z,{onClick:()=>O("twitter"),children:"Share on Twitter"}),(0,a.jsx)(n.z,{onClick:()=>O("linkedin"),children:"Share on Linkedin"}),(0,a.jsx)(n.z,{onClick:()=>O("copy"),children:"Copy Link"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 ml-2 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",children:[null==w?void 0:w.likeCount," likes"]}),(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",onClick:()=>E(!_),children:[null==w?void 0:w.commentCount," Comments"]}),(0,a.jsxs)(n.z,{variant:"ghost",size:"sm",children:[null==w?void 0:w.shareCount," share"]})]})]}),(0,a.jsx)(d.M,{children:_&&(0,a.jsxs)(o.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[(0,a.jsx)(j,{className:"h-[300px] w-full rounded-md border p-4",children:(0,a.jsx)(g,{comments:null==w?void 0:w.comments},null==w?void 0:null===(y=w.comments)||void 0===y?void 0:y._id)}),(0,a.jsxs)("div",{className:"flex items-center mt-4 p-2",children:[(0,a.jsx)(c.qE,{className:"h-10 w-10 rounded mr-3",children:(null==R?void 0:R.profilePicture)?(0,a.jsx)(c.F$,{src:null==R?void 0:R.profilePicture,alt:null==R?void 0:R.username}):(0,a.jsx)(c.Q5,{className:"dark:bg-gray-400",children:D})}),(0,a.jsx)(N.I,{className:"flex-1 mr-2 dark:border-gray-400",placeholder:"Write a comment...",value:F,ref:U,onChange:e=>L(e.target.value),onKeyDown:e=>"Enter"===e.key&&q()}),(0,a.jsx)(n.z,{onClick:q,children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})})]})]})})]})},null==w?void 0:w._id)},Z=s(810),C=s(9376),P=s(9064),z=()=>{let[e,t]=(0,r.useState)(new Set),{posts:s,fetchPost:o,handleLikePost:d,handleCommentPost:c,handleSharePost:u}=(0,Z.Y)(),m=(0,C.useRouter)();(0,r.useEffect)(()=>{o()},[o]),(0,r.useEffect)(()=>{let e=localStorage.getItem("likePosts");e&&t(new Set(JSON.parse(e)))},[]);let f=async s=>{let a=new Set(e);a.has(s)?(a.delete(s),P.ZP.error("post disliked successfully")):(a.add(s),P.ZP.success("post like successfully")),t(a),localStorage.setItem("likePosts",JSON.stringify(Array.from(a)));try{await d(s),await o()}catch(e){console.error(e),P.ZP.error("failed to like or unlike the post")}},h=null==s?void 0:s.filter(e=>"video"===e.mediaType);return(0,a.jsxs)("div",{className:"mt-12 min-h-screen",children:[(0,a.jsx)(l.Z,{}),(0,a.jsxs)("main",{className:"ml-0 md:ml-64 sm:p-6",children:[(0,a.jsxs)(n.z,{variant:"ghost",className:"mb-4",onClick:()=>{m.push("/")},children:[(0,a.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Back to feed"]}),(0,a.jsx)("div",{className:"max-w-3xl mx-auto",children:h.map(t=>(0,a.jsx)(k,{post:t,isLiked:e.has(null==t?void 0:t._id),onLike:()=>f(null==t?void 0:t._id),onComment:async e=>{await c(null==t?void 0:t._id,e.text),await o()},onShare:async()=>{await u(null==t?void 0:t._id),await o()}},null==t?void 0:t._id))})]})]})}},4522:function(e,t,s){"use strict";s.d(t,{F$:function(){return o},Q5:function(){return d},qE:function(){return i}});var a=s(7437),r=s(2265),l=s(4930),n=s(6474);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.fC,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r})});i.displayName=l.fC.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.Ee,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",s),...r})});o.displayName=l.Ee.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.NY,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r})});d.displayName=l.NY.displayName},4449:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var a=s(7437),r=s(2265),l=s(7053),n=s(7712),i=s(6474);let o=(0,n.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:n,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:s})),ref:t,...c})});d.displayName="Button"},1298:function(e,t,s){"use strict";s.d(t,{$N:function(){return x},Be:function(){return v},Vq:function(){return o},cN:function(){return h},cZ:function(){return m},fK:function(){return f},hg:function(){return d}});var a=s(7437),r=s(2265),l=s(9027),n=s(653),i=s(6474);let o=l.fC,d=l.xz,c=l.h_;l.x8;let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});u.displayName=l.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(l.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Pxu,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=l.VY.displayName;let f=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};f.displayName="DialogHeader";let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};h.displayName="DialogFooter";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});x.displayName=l.Dx.displayName;let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});v.displayName=l.dk.displayName},322:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var a=s(7437),r=s(2265),l=s(6474);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"},3871:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(7437),r=s(2265),l=s(5156),n=s(6474);let i=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:i=!0,...o}=e;return(0,a.jsx)(l.f,{ref:t,decorative:i,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});i.displayName=l.f.displayName},6474:function(e,t,s){"use strict";s.d(t,{F:function(){return o},cn:function(){return i},u:function(){return d}});var a=s(1994),r=s(3335),l=s(8528),n=s(2258);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.m6)((0,a.W)(t))}let o=e=>(0,l.Q)((0,n.D)(e),{addSuffix:!0}),d=e=>new Date(e).toLocaleDateString("en-GB")},7415:function(e,t,s){"use strict";let a=s(3464).Z.create({baseURL:"http://localhost:5000",withCredentials:!0});t.Z=a},9229:function(e,t,s){"use strict";let a=(0,s(3011).U)(e=>({isSidebarOpen:!1,toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen}))}));t.Z=a},810:function(e,t,s){"use strict";s.d(t,{Y:function(){return h}});var a=s(7415);let r=async e=>{try{var t;let s=await a.Z.post("/api/users/posts",e);return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}catch(e){throw console.error(e),e}},l=async e=>{try{var t;let s=await a.Z.delete("/api/users/posts/".concat(e));return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}catch(e){throw console.error(e),e}},n=async e=>{try{var t;let s=await a.Z.post("/api/users/story",e);return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}catch(e){throw console.error(e),e}},i=async()=>{try{var e;let t=await a.Z.get("/api/users/posts");return null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.data}catch(e){throw console.error(e),e}},o=async()=>{try{var e;let t=await a.Z.get("/api/users/story");return null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.data}catch(e){throw console.error(e),e}},d=async e=>{try{var t;let s=await a.Z.post("/api/users/posts/likes/".concat(e));return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}catch(e){throw console.error(e),e}},c=async(e,t)=>{try{var s;let r=await a.Z.post("/api/users/posts/comments/".concat(e),t);return null==r?void 0:null===(s=r.data)||void 0===s?void 0:s.data}catch(e){throw console.error(e),e}},u=async e=>{try{var t;let s=await a.Z.post("/api/users/posts/share/".concat(e));return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}catch(e){throw console.error(e),e}},m=async e=>{try{var t;let s=await a.Z.get("/api/users/posts/user/".concat(e));return null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}catch(e){throw console.error(e),e}};var f=s(9064);let h=(0,s(3011).U)(e=>({posts:[],userPosts:[],story:[],loading:!1,error:null,fetchPost:async()=>{e({loading:!0});try{let t=await i();e({posts:t,loading:!1})}catch(t){e({error:t,loading:!1})}},fetchUserPost:async t=>{e({loading:!0});try{let s=await m(t);e({userPosts:s,loading:!1})}catch(t){e({error:t,loading:!1})}},fetchStoryPost:async()=>{e({loading:!0});try{let t=await o();e({story:t,loading:!1})}catch(t){e({error:t,loading:!1})}},handleCreatePost:async t=>{e({loading:!0});try{let s=await r(t);e(e=>({posts:[s,...e.posts],loading:!1})),f.ZP.success("Post created successfully")}catch(t){e({error:t,loading:!1}),f.ZP.error("failed to create a post")}},handleDeletePost:async t=>{e({loading:!0});try{await l(t),e(e=>({posts:e.posts.filter(e=>e._id!==t),loading:!1})),f.ZP.success("Post deleted successfully")}catch(t){e({error:t,loading:!1}),f.ZP.error("Failed to delete the post")}},handleCreateStory:async t=>{e({loading:!0});try{let s=await n(t);e(e=>({story:[s,...e.story],loading:!1})),f.ZP.success("Story created successfully")}catch(t){e({error:t,loading:!1}),f.ZP.error("failed to create a story")}},handleLikePost:async t=>{e({loading:!0});try{await d(t)}catch(t){e({error:t,loading:!1})}},handleCommentPost:async(t,s)=>{e({loading:!0});try{let a=await c(t,{text:s});e(e=>({posts:e.posts.map(e=>(null==e?void 0:e._id)===t?{...e,comments:[...e.comments,a]}:e)})),f.ZP.success("Comments added successfully")}catch(t){e({error:t,loading:!1}),f.ZP.error("failed to add comments")}},handleSharePost:async t=>{e({loading:!0});try{await u(t),f.ZP.success("post share successfully")}catch(t){e({error:t,loading:!1}),f.ZP.error("failed to share this post")}}}))},8882:function(e,t,s){"use strict";var a=s(3011),r=s(6885);let l=(0,a.U)((0,r.tJ)(e=>({user:null,setUser:t=>e({user:t}),clearUser:()=>e({user:null})}),{name:"user-storage",getStorage:()=>localStorage}));t.Z=l}},function(e){e.O(0,[310,454,835,386,577,937,971,117,744],function(){return e(e.s=1382)}),_N_E=e.O()}]);