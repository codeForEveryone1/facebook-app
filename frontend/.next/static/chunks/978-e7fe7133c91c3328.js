"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{4766:function(e,s,l){l.d(s,{Z:function(){return t}});let t=(0,l(9205).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},2369:function(e,s,l){l.d(s,{Z:function(){return t}});let t=(0,l(9205).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,s,l){l.d(s,{Z:function(){return t}});let t=(0,l(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9374:function(e,s,l){l.d(s,{Z:function(){return t}});let t=(0,l(9205).Z)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},5775:function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return i}});let t=l(7043);l(7437),l(2265);let a=t._(l(5602));function i(e,s){var l;let t={loading:e=>{let{error:s,isLoading:l,pastDelay:t}=e;return null}};"function"==typeof e&&(t.loader=e);let i={...t,...s};return(0,a.default)({...i,modules:null==(l=i.loadableGenerated)?void 0:l.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},1523:function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let t=l(8993);function a(e){let{reason:s,children:l}=e;if("undefined"==typeof window)throw new t.BailoutToCSRError(s);return l}},5602:function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let t=l(7437),a=l(2265),i=l(1523),r=l(49);function n(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let s={...c,...e},l=(0,a.lazy)(()=>s.loader().then(n)),o=s.loading;function d(e){let n=o?(0,t.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,c=s.ssr?(0,t.jsxs)(t.Fragment,{children:["undefined"==typeof window?(0,t.jsx)(r.PreloadCss,{moduleIds:s.modules}):null,(0,t.jsx)(l,{...e})]}):(0,t.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(l,{...e})});return(0,t.jsx)(a.Suspense,{fallback:n,children:c})}return d.displayName="LoadableComponent",d}},49:function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadCss",{enumerable:!0,get:function(){return i}});let t=l(7437),a=l(544);function i(e){let{moduleIds:s}=e;if("undefined"!=typeof window)return null;let l=(0,a.getExpectedRequestStore)("next/dynamic css"),i=[];if(l.reactLoadableManifest&&s){let e=l.reactLoadableManifest;for(let l of s){if(!e[l])continue;let s=e[l].files.filter(e=>e.endsWith(".css"));i.push(...s)}}return 0===i.length?null:(0,t.jsx)(t.Fragment,{children:i.map(e=>(0,t.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:l.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},1978:function(e,s,l){l.r(s),l.d(s,{default:function(){return I}});var t=l(7437),a=l(2265),i=l(642),r=l(4847),n=l(3583),c=l(9205);let o=(0,c.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),d=(0,c.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var m=l(4449),u=()=>{let[e,s]=(0,a.useState)(!1),l=[{name:"Netflix",description:"Watch the latest trending movies and series.",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3qmBuBERRMhoFTvvNUWw7Kr9iicoxC4c8ZQ&s",website:"https://www.netflix.com"},{name:"Instagram",description:"Explore the latest features and connect with friends.",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0NoNt4ECTrCIzRA6PhvyyPThBY9OUEW0-ng&s",website:"https://www.instagram.com"},{name:"Spotify",description:"Stream your favorite music anytime, anywhere.",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcShpvQJUXehm_yT1kr2WSATHaDRF88_JjWHcQ&s",website:"https://www.spotify.com"},{name:"Amazon",description:"Shop for everything you need with fast delivery.",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaBLSbp3rFpIZ0kzoreJLN7uZqkJz0h6-RQQ&s",website:"https://www.amazon.com"},{name:"Apple",description:"Discover innovative products and services.",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0qsC4qgsmGTJ9HnNYatRyi7GyJ7GlRMujlw&s",website:"https://www.apple.com"}],i=e?l:l.slice(0,2);return(0,t.jsx)(r.E.aside,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5},className:"space-y-4 ",children:(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex text-lg font-semibold items-center",children:[(0,t.jsx)(o,{className:"mr-2 h-5 w-5 text-primary"}),"Papuler Sponsers"]})}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("ul",{className:"space-y-4",children:i.map((e,s)=>(0,t.jsxs)(r.E.li,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"flex flex-col items-center space-x-4 rounded-lg p-2 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:[(0,t.jsx)("img",{src:e.image,alt:e.name,className:"object-contain h-32 w-50 rounded-md"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold  text-lg",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description}),(0,t.jsxs)("a",{href:e.website,target:"_blank",className:"text-primary text-sm flex items-center mt-1 hover:underline",children:["visit website ",(0,t.jsx)(d,{className:"h-4 w-4 ml-4"})," "]})]})]},e.name))}),l.length>2&&(0,t.jsx)(m.z,{variant:"outline",className:"w-full mt-4 dark:text-white",onClick:()=>s(!e),children:e?"Show Less":"Show More"})]})]})})},x=l(4522),h=l(810),f=l(8882);let v=(0,c.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var p=l(4930),j=l(2489),g=e=>{let{file:s,fileType:l,onClose:i,onPost:r,isNewStory:n,username:c,avatar:o,isLoading:d}=e,u=null==c?void 0:c.split(" ").map(e=>e.charAt(0).toUpperCase()).join(""),h=(0,a.useRef)(null),f=e=>{h.current&&!h.current.contains(e.target)&&i()};return(0,a.useEffect)(()=>(document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}),[]),(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"relative w-full max-w-md h-[70vh] max-sm:max-w-[95%] flex flex-col bg-white dark:text-white dark:bg-gray-800 rounded-sm sm:rounded-lg overflow-hidden",ref:h,children:[(0,t.jsx)(m.z,{className:"absolute top-4 right-4 z-10 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",variant:"ghost",onClick:i,children:(0,t.jsx)(j.Z,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"absolute sm:top-4 sm:left-4 z-10 flex items-center p-1",children:[(0,t.jsx)(x.qE,{className:" w-8 h-8 sm:w-10 sm:h-10 mr-2",children:o?(0,t.jsx)(x.F$,{src:o,alt:c}):(0,t.jsx)(p.Q5,{className:"text-sm",children:u})}),(0,t.jsx)("span",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:c})]}),(0,t.jsx)("div",{className:"flex-grow flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:"image"===l?(0,t.jsx)("img",{src:s,alt:"story_preview",className:"max-w-full max-h-full object-cover"}):(0,t.jsx)("video",{src:s,controls:!0,autoPlay:!0,className:"max-w-full max-h-full object-cover"})}),n&&(0,t.jsx)("div",{className:"absolute bottom-4 right-2 transform -translate-x-1/2",children:(0,t.jsx)(m.z,{onClick:r,className:"bg-blue-500 hover:bg-orange-500 text-white",children:d?"Saving...":"Share"})})]})})},y=e=>{var s,l,i,r,c,o,d,u,p,j;let{isAddStory:y,story:b}=e,{user:N}=(0,f.Z)(),[w,k]=(0,a.useState)(null),[C,Z]=(0,a.useState)(null),[S,P]=(0,a.useState)(""),[z,_]=(0,a.useState)(!1),{handleCreateStory:E}=(0,h.Y)(),[M,q]=(0,a.useState)(!1),[L,F]=(0,a.useState)(!1),R=(0,a.useRef)(null),O=null==b?void 0:null===(l=b.user)||void 0===l?void 0:null===(s=l.username)||void 0===s?void 0:s.split(" ").map(e=>e[0]).join(""),U=async()=>{try{_(!0);let e=new FormData;C&&e.append("media",C),await E(e),T()}catch(e){console.error(e),_(!1)}},T=()=>{q(!1),Z(null),k(null),P(null),F(!1)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Zb,{className:" h-36 md:w-40 w-20 md:h-60 relative  group cursor-pointer rounded-xl",onClick:y?void 0:()=>{k(null==b?void 0:b.mediaUrl),P(null==b?void 0:b.mediaType),F(!1),q(!0)},children:(0,t.jsx)(n.aY,{className:"p-0 h-full rounded-xl",children:y?(0,t.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,t.jsx)("div",{className:"sm:h-3/4 h-3/5 w-full relative border-b",children:(0,t.jsx)(x.qE,{className:"w-full h-full rounded-none",children:(null==N?void 0:N.profilePicture)?(0,t.jsx)(x.F$,{src:null==N?void 0:N.profilePicture,alt:null==N?void 0:N.username,className:"object-cover"}):(0,t.jsx)("p",{className:"w-full h-full flex justify-center items-center text-4xl",children:O})})}),(0,t.jsxs)("div",{className:"sm:h-1/4  w-full bg-white dark:bg-gray-800 flex flex-col items-center justify-center",children:[(0,t.jsx)(m.z,{variant:"ghost",size:"sm",className:"p-0 min-h-6 h-6 min-w-6 w-6 rounded-full bg-blue-500 hover:bg-blue-600 ",onClick:()=>R.current.click(),children:(0,t.jsx)(v,{className:"min-h-4 min-w-4 text-white"})}),(0,t.jsx)("p",{className:"text-xs font-semibold mt-1",children:"Create Story"})]}),(0,t.jsx)("input",{type:"file",accept:"image/*,video/*",className:"hidden",ref:R,onChange:e=>{let s=e.target.files[0];s&&(Z(s),P(s.type.startsWith("video")?"video":"image"),k(URL.createObjectURL(s)),F(!0),q(!0)),e.target.value=""}})]}):(0,t.jsxs)(t.Fragment,{children:[(null==b?void 0:b.mediaType)==="image"?(0,t.jsx)("img",{src:null==b?void 0:b.mediaUrl,alt:null==b?void 0:null===(i=b.user)||void 0===i?void 0:i.username,className:"w-full h-full object-cover rounded-lg"}):(0,t.jsx)("video",{src:null==b?void 0:b.mediaUrl,alt:null==b?void 0:null===(r=b.user)||void 0===r?void 0:r.username,className:"w-full h-full object-cover rounded-lg"}),(0,t.jsx)("div",{className:"absolute top-2 left-2 ring-2 ring-blue-500 rounded-full ",children:(0,t.jsx)(x.qE,{className:"w-8 h-8",children:(null==b?void 0:null===(c=b.user)||void 0===c?void 0:c.profilePicture)?(0,t.jsx)(x.F$,{src:null==b?void 0:null===(o=b.user)||void 0===o?void 0:o.profilePicture,alt:null==b?void 0:null===(d=b.user)||void 0===d?void 0:d.username}):(0,t.jsx)(x.Q5,{children:O})})}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,t.jsx)("p",{className:"text-white text-xs font-semibold truncate",children:null==b?void 0:null===(u=b.user)||void 0===u?void 0:u.username})})]})})}),M&&(0,t.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-[999] h-[100vh] w-[100vw]",children:(0,t.jsx)(g,{file:w,fileType:S,onClose:()=>{T()},onPost:U,isNewStory:L,username:L?null==N?void 0:N.username:null==b?void 0:null===(p=b.user)||void 0===p?void 0:p.username,avatar:L?null==N?void 0:N.profilePicture:null==b?void 0:null===(j=b.user)||void 0===j?void 0:j.profilePicture,isLoading:z})})]})},b=()=>{let{story:e,fetchStoryPost:s}=(0,h.Y)();return(0,a.useEffect)(()=>{s()},[s]),(0,t.jsx)("div",{className:"relative ",children:(0,t.jsx)("div",{className:"flex overflow-x-auto sm:py-6 py-2",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[" ",(0,t.jsx)(y,{isAddStory:!0}),null==e?void 0:e.map(e=>(0,t.jsx)(y,{story:e,className:"w-48 flex-shrink-0"},e._id))]})})})},N=l(1298),w=l(322),k=l(3871);let C=(0,c.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var Z=l(9374);let S=(0,c.Z)("Laugh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z",key:"b2q4dd"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);var P=l(1670),z=l(8614),_=l(5775);let E=l.n(_)()(()=>Promise.all([l.e(560),l.e(497)]).then(l.bind(l,1799)),{loadableGenerated:{webpack:()=>[1799]},ssr:!1});var M=e=>{var s;let{isPostFormOpen:l,setIsPostFormOpen:i}=e,[c,o]=(0,a.useState)(!1),{user:d}=(0,f.Z)(),[u,p]=(0,a.useState)(""),[g,y]=(0,a.useState)(null),[b,_]=(0,a.useState)(null),[M,q]=(0,a.useState)(""),[L,F]=(0,a.useState)(!1),{handleCreatePost:R}=(0,h.Y)(),[O,U]=(0,a.useState)(!1),T=(0,a.useRef)(null),A=null==d?void 0:null===(s=d.username)||void 0===s?void 0:s.split(" ").map(e=>e[0]).join(""),Q=async()=>{try{F(!0);let e=new FormData;e.append("content",u),b&&e.append("media",b);let s=await R(e);console.log(s),p(""),_(null),y(null),i(!1)}catch(e){console.error(e),F(!1)}};return(0,t.jsx)(n.Zb,{className:" max-sm:rounded-none",children:(0,t.jsx)(n.aY,{className:"p-1 sm:p-4 ",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(x.qE,{children:(null==d?void 0:d.profilePicture)?(0,t.jsx)(x.F$,{src:null==d?void 0:d.profilePicture,alt:null==d?void 0:d.username}):(0,t.jsx)(x.Q5,{className:"dark:bg-gray-400",children:A})}),(0,t.jsxs)(N.Vq,{open:l,onOpenChange:i,children:[(0,t.jsxs)(N.hg,{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(w.I,{placeholder:"what's on your mind?",readOnly:!0,className:"cursor-pointer rounded-full sm:h-12  dark:bg-[rgb(58,59,60)] placeholder:text-gray-500 dark:placeholder:text-gray-400  "}),(0,t.jsx)("div",{className:"block sm:hidden",children:(0,t.jsx)(m.z,{variant:"ghost",className:"flex items-center justify-center",children:(0,t.jsx)(C,{className:"h-12 w-12 text-green-500 "})})})]}),(0,t.jsx)(k.Z,{className:"my-2 dark:bg-slate-400 hidden sm:block"}),(0,t.jsx)("div",{className:"hidden sm:block",children:(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)(m.z,{variant:"ghost",className:"flex items-center justify-center",children:[(0,t.jsx)(C,{className:"h-5 w-5 text-green-500 mr-2"}),(0,t.jsx)("span",{className:"dark:text-slate-100",children:"Photo"})]}),(0,t.jsxs)(m.z,{variant:"ghost",className:"flex items-center justify-center",children:[(0,t.jsx)(Z.Z,{className:"h-5 w-5 text-red-500 mr-2"}),(0,t.jsx)("span",{className:"dark:text-slate-100",children:"Video"})]}),(0,t.jsxs)(m.z,{variant:"ghost",className:"flex items-center justify-center",children:[(0,t.jsx)(S,{className:"h-5 w-5 text-orange-500 mr-2"}),(0,t.jsx)("span",{className:"dark:text-slate-100",children:"Feelings"})]})]})})]}),(0,t.jsxs)(N.cZ,{className:"sm:max-w-[525px] max-h-[80vh] overflow-y-auto",children:[(0,t.jsx)(N.fK,{children:(0,t.jsx)(N.$N,{className:"text-center",children:"Create Post"})}),(0,t.jsx)(k.Z,{}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 py-4",children:[(0,t.jsx)(x.qE,{className:"h-10 w-10",children:(null==d?void 0:d.profilePicture)?(0,t.jsx)(x.F$,{src:null==d?void 0:d.profilePicture,alt:null==d?void 0:d.username}):(0,t.jsx)(x.Q5,{children:A})}),(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"font-semibold",children:null==d?void 0:d.username})})]}),(0,t.jsx)(P.g,{placeholder:"what's on your mind?",className:"max-h-12 sm:min-h-[100px] text-lg",value:u,onChange:e=>p(e.target.value)}),(0,t.jsx)(z.M,{children:(O||g)&&(0,t.jsxs)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"relative mt-4 border-2 border-dashed  border-gray-300 rounded-lg p-8 flex  flex-col items-center justify-center ",children:[(0,t.jsx)(m.z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2",onClick:()=>{U(!1),_(null),y(null)},children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})}),g?M.startsWith("image")?(0,t.jsx)("img",{src:g,alt:"preview_img",className:"w-full h-auto max-h-[300px] object-cover"}):(0,t.jsx)("video",{controls:!0,src:g,className:"w-full h-auto max-h-[300px] object-cover"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{className:"h-12 w-12 text-gray-400 mb-2 cursor-pointer ",onClick:()=>T.current.click()}),(0,t.jsx)("p",{className:"text-center  text-gray-500 ",children:"Add Photos/Videos"})]}),(0,t.jsx)("input",{type:"file",accept:"image/*,video/*",className:"hidden",onChange:e=>{let s=e.target.files[0];_(s),q(s.type),y(URL.createObjectURL(s))},ref:T})]})}),(0,t.jsxs)("div",{className:"bg-gray-200 dark:bg-muted p-4 rounded-lg mt-4 ",children:[(0,t.jsx)("p",{className:"font-semibold mb-2",children:"Add Your Post"}),(0,t.jsxs)("div",{className:"flex space-x-2 ",children:[(0,t.jsx)(m.z,{variant:"outline",size:"icon",onClick:()=>U(!O),children:(0,t.jsx)(C,{className:"h-4 w-4 text-green-500 "})}),(0,t.jsx)(m.z,{variant:"outline",size:"icon",onClick:()=>U(!O),children:(0,t.jsx)(Z.Z,{className:"h-4 w-4 text-red-500 "})}),(0,t.jsx)(m.z,{variant:"outline",size:"icon",onClick:()=>o(!c),children:(0,t.jsx)(S,{className:"h-4 w-4 text-orange-500 "})})]})]}),c&&(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"relative",children:[(0,t.jsx)(m.z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10",onClick:()=>o(!1),children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})}),(0,t.jsx)(E,{onEmojiClick:e=>{p(s=>s+e.emoji)}})]}),(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)(m.z,{className:"bg-blue-500 text-white",onClick:Q,children:L?"Saving...":"Post"})})]})]})]})})})};let q=(0,c.Z)("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);var L=l(7782),F=l(1810),R=l(2718),O=l(8919),U=l(7850),T=l(6474),A=l(9376),Q=l(9064),Y=e=>{var s,l,i,c,o,d,u;let{post:v,isLiked:p,onShare:j,onComment:g,onLike:y}=e,[b,w]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(!1),[S,P]=(0,a.useState)(!1),_=(0,a.useRef)(null),E=(0,A.useRouter)(),{user:M}=(0,f.Z)(),{handleDeletePost:Y}=(0,h.Y)(),I=null==v?void 0:null===(l=v.user)||void 0===l?void 0:null===(s=l.username)||void 0===s?void 0:s.split(" ").map(e=>e[0]).join(""),G=()=>"http://localhost:3000/".concat(null==v?void 0:v.id),$=async()=>{w(!0),setTimeout(async()=>{try{await Y(v._id),Q.ZP.success("Post deleted successfully")}catch(e){Q.ZP.error("Failed to delete post")}finally{w(!1)}},1e3)},B=e=>{let s;let l=G();switch(e){case"facebook":s="https://www.facebook.com/sharer/sharer.php?u=}";break;case"twitter":s="https://twitter.com/intent/tweet?url=}";break;case"linkedin":s="https://www.linkedin.com/shareArticle?mini=true&url=}";break;case"copy":navigator.clipboard.writeText(l),Z(!1);return;default:return}window.open(s,"_blank"),Z(!1)};return(0,t.jsx)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-[100vw] min-w-full",children:(0,t.jsx)(n.Zb,{className:"max-sm:rounded-none my-1 ",children:(0,t.jsxs)(n.aY,{className:"p-2 sm:p-6 dark:text-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between sm:mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 cursor-pointer ",onClick:()=>{var e;E.push("/user-profile/".concat(null==v?void 0:null===(e=v.user)||void 0===e?void 0:e._id))},children:[(0,t.jsx)(x.qE,{children:(null==v?void 0:null===(i=v.user)||void 0===i?void 0:i.profilePicture)?(0,t.jsx)(x.F$,{src:null==v?void 0:null===(c=v.user)||void 0===c?void 0:c.profilePicture,alt:null==v?void 0:null===(o=v.user)||void 0===o?void 0:o.username}):(0,t.jsx)(x.Q5,{className:"dark:bg-gray-400",children:I})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold dark:text-white",children:null==v?void 0:null===(d=v.user)||void 0===d?void 0:d.username}),(0,t.jsx)("p",{className:"font-sm text-gray-500",children:(0,T.F)(null==v?void 0:v.createdAt)})]})]}),(null==v?void 0:null===(u=v.user)||void 0===u?void 0:u._id)===(null==M?void 0:M._id)?b?(0,t.jsx)(m.z,{variant:"ghost",disabled:!0,children:"Loading..."}):(0,t.jsxs)(m.z,{variant:"ghost",onClick:$,children:[(0,t.jsx)(q,{className:"h-4 w-4"})," Delete"]}):(0,t.jsx)(m.z,{variant:"ghost",className:"dark:hover:bg-gray-500",children:(0,t.jsx)(L.Z,{className:"dark:text-white h-4 w-4"})})]}),(0,t.jsx)("p",{className:"sm:mb-4 mb-1",children:null==v?void 0:v.content}),(null==v?void 0:v.mediaUrl)&&"image"===v.mediaType&&(0,t.jsx)("img",{src:null==v?void 0:v.mediaUrl,alt:"post_image",className:"w-full h-auto rounded-lg mb-4"}),(null==v?void 0:v.mediaUrl)&&"video"===v.mediaType&&(0,t.jsxs)("video",{controls:!0,className:"w-full h-auto rounded-lg mb-4",children:[(0,t.jsx)("source",{src:null==v?void 0:v.mediaUrl,type:"video/mp4"}),"Your browser does not support the video tag"]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1 sm:mb-4",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 hover:border-b-2 border-gray-400 cursor-pointer ",children:[null==v?void 0:v.likeCount," likes"]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 hover:border-b-2 border-gray-400 cursor-pointer ",onClick:()=>P(!S),children:[null==v?void 0:v.commentCount," comments"]}),(0,t.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 hover:border-b-2 border-gray-400 cursor-pointer ",children:[null==v?void 0:v.shareCount," share"]})]})]}),(0,t.jsx)(k.Z,{className:"mb-2 dark:bg-gray-400"}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)(m.z,{variant:"ghost",className:"flex-1 dark:hover:bg-gray-600 ".concat(p?"text-blue-600":""),onClick:y,children:[(0,t.jsx)(F.Z,{className:" h-4 w-4"})," Like"]}),(0,t.jsxs)(m.z,{variant:"ghost",className:"flex-1 dark:hover:bg-gray-600 ",onClick:()=>{P(!S)},children:[(0,t.jsx)(R.Z,{className:" h-4 w-4"})," Comment"]}),(0,t.jsxs)(N.Vq,{open:C,onOpenChange:Z,children:[(0,t.jsx)(N.hg,{asChild:!0,children:(0,t.jsxs)(m.z,{variant:"ghost",className:"flex-1 dark:hover:bg-gray-500",onClick:j,children:[(0,t.jsx)(O.Z,{className:" h-4 w-4"}),"share"]})}),(0,t.jsxs)(N.cZ,{children:[(0,t.jsxs)(N.fK,{children:[(0,t.jsx)(N.$N,{children:"Share This Post"}),(0,t.jsx)(N.Be,{children:"Choose how you want to share this post"})]}),(0,t.jsxs)("div",{className:"flex flex-col space-y-4 ",children:[(0,t.jsx)(m.z,{onClick:()=>B("facebook"),children:"Share on Facebook"}),(0,t.jsx)(m.z,{onClick:()=>B("twitter"),children:"Share on Twitter"}),(0,t.jsx)(m.z,{onClick:()=>B("linkedin"),children:"Share on Linkedin"}),(0,t.jsx)(m.z,{onClick:()=>B("copy"),children:"Copy Link"})]})]})]})]}),(0,t.jsx)(k.Z,{className:"mb-2 dark:bg-gray-400"}),(0,t.jsx)(z.M,{children:S&&(0,t.jsx)(r.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:(0,t.jsx)(U.Z,{post:v,onComment:g,commentInputRef:_})})})]})})},null==v?void 0:v._id)},I=()=>{let[e,s]=(0,a.useState)(!1),[l,r]=(0,a.useState)(new Set),{posts:n,fetchPost:c,handleLikePost:o,handleCommentPost:d,handleSharePost:m}=(0,h.Y)();(0,a.useEffect)(()=>{c()},[c]),(0,a.useEffect)(()=>{let e=localStorage.getItem("likePosts");e&&r(new Set(JSON.parse(e)))},[]);let x=async e=>{let s=new Set(l);s.has(e)?(s.delete(e),Q.ZP.error("post disliked successfully")):(s.add(e),Q.ZP.success("post like successfully")),r(s),localStorage.setItem("likePosts",JSON.stringify(Array.from(s)));try{await o(e),await c()}catch(e){console.error(e),Q.ZP.error("failed to like or unlike the post")}};return(0,t.jsx)("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:(0,t.jsxs)("main",{className:"flex flex-1 pt-10",children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)("div",{className:"flex-1 sm:px-2 sm:py-6 md:ml-64 lg:max-w-2xl 2xl:mx-auto overscroll-x-auto sm:max-w-[100vw]",children:(0,t.jsxs)("div",{className:" 2xl:ml-28",children:[(0,t.jsx)("div",{className:"overflow-x-auto max-w-[100vw] pl-1 dark:bg-[rgb(36,37,38)] my-1 sm:rounded-lg   mt-[8px] ",children:(0,t.jsx)(b,{})}),(0,t.jsx)(M,{isPostFormOpen:e,setIsPostFormOpen:s}),(0,t.jsx)("div",{className:" mt-1 sm:mt-6 sm:space-y-6 mb-4 ",children:n.map(e=>(0,t.jsx)(Y,{post:e,isLiked:l.has(null==e?void 0:e._id),onLike:()=>x(null==e?void 0:e._id),onComment:async s=>{await d(null==e?void 0:e._id,s.text),await c()},onShare:async()=>{await m(null==e?void 0:e._id),await c()}},e._id))})]})}),(0,t.jsx)("div",{className:"hidden 2xl:block lg:w-64 xl:w-80 fixed right-0 top-10 sm:top-16 bottom-0 overflow-y-auto p-4",children:(0,t.jsx)(u,{})})]})})}},642:function(e,s,l){var t=l(7437),a=l(2265),i=l(4522),r=l(4449),n=l(4938),c=l(5805),o=l(9374),d=l(2718),m=l(2369),u=l(4766),x=l(3871),h=l(9229),f=l(9376),v=l(8882);s.Z=()=>{let{isSidebarOpen:e,toggleSidebar:s}=(0,h.Z)(),l=(0,f.useRouter)(),p=(0,a.useRef)(null),{user:j}=(0,v.Z)(),g=(t,a)=>{l.push(t),e&&s()},y=l=>{e&&p.current&&!p.current.contains(l.target)&&s()};(0,a.useEffect)(()=>(e?document.addEventListener("click",y):document.removeEventListener("click",y),()=>{document.removeEventListener("click",y)}),[e]);let b=(null==j?void 0:j.username)?j.username.split(" ").map(e=>e.charAt(0).toUpperCase()).join(""):"U";return(0,t.jsx)("aside",{ref:p,className:"fixed top-10  left-0 h-full w-64 p-4 transform transition-transform duration-200 ease-in-out md:translate-x-0 flex flex-col z-50 md:z-0 ".concat(e?"translate-x-0 bg-white dark:bg-[rgb(37,38,39)] shadow-lg":"-translate-x-full","  ").concat(e?"md:hidden ":"md:block"," md:bg-transparent md:shadow-none "),children:(0,t.jsxs)("div",{className:"flex flex-col h-full overflow-y-auto",children:[(0,t.jsxs)("nav",{className:"space-y-3 flex-grow",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:()=>g("/"),children:[(0,t.jsx)(i.qE,{className:"h-8 w-8",children:(null==j?void 0:j.profilePicture)?(0,t.jsx)(i.F$,{src:null==j?void 0:j.profilePicture,alt:null==j?void 0:j.username}):(0,t.jsx)(i.Q5,{className:"dark:bg-gray-400",children:b})}),(0,t.jsx)("span",{className:"font-semibold",children:null==j?void 0:j.username})]}),(0,t.jsxs)(r.z,{variant:"ghost",className:"full justify-start   ",onClick:()=>g("/"),children:[(0,t.jsx)(n.Z,{className:"mr-4"}),"Home"]}),(0,t.jsxs)(r.z,{variant:"ghost",className:"full justify-start",onClick:()=>g("/friends-list"),children:[(0,t.jsx)(c.Z,{className:"mr-4"}),"Friends"]}),(0,t.jsxs)(r.z,{variant:"ghost",className:"full justify-start",onClick:()=>g("/videos"),children:[(0,t.jsx)(o.Z,{className:"mr-4"}),"Video"]}),(0,t.jsxs)(r.z,{variant:"ghost",className:"full justify-start",children:[(0,t.jsx)(d.Z,{className:"mr-4"}),"Messages"]}),(0,t.jsxs)(r.z,{variant:"ghost",className:"full justify-start",onClick:()=>g("/user-profile/".concat(null==j?void 0:j._id)),children:[(0,t.jsx)(m.Z,{className:"mr-4"}),"Profile"]}),(0,t.jsxs)(r.z,{variant:"ghost",className:"full justify-start",children:[(0,t.jsx)(u.Z,{className:"mr-4"}),"Notification"]})]}),(0,t.jsxs)("div",{className:"mb-16",children:[(0,t.jsx)(x.Z,{className:"my-4"}),(0,t.jsx)("div",{className:"flex items-center space-x-2 mb-4 cursor-pointer",children:(0,t.jsx)(i.qE,{className:"h-8 w-8",onClick:()=>g("/user-profile/".concat(null==j?void 0:j._id)),children:(null==j?void 0:j.profilePicture)?(0,t.jsx)(i.F$,{src:null==j?void 0:j.profilePicture,alt:null==j?void 0:j.username}):(0,t.jsx)(i.Q5,{className:"dark:bg-gray-400",children:b})})}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsx)("p",{children:"Privacy \xb7 Terms \xb7 Advertising "}),(0,t.jsx)("p",{children:"Cookies \xb7 Meta \xa9 2024"})]})]})]})})}},9229:function(e,s,l){let t=(0,l(3011).U)(e=>({isSidebarOpen:!1,toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen}))}));s.Z=t}}]);